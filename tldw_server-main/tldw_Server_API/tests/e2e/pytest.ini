[pytest]
# Configuration for e2e tests that simulate real user interactions

# Asyncio mode configuration
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for conditional test execution
markers =
    single_user: Tests specific to single-user mode
    multi_user: Tests specific to multi-user mode
    requires_llm: Tests requiring LLM provider configuration
    requires_transcription: Tests requiring transcription services
    requires_embeddings: Tests requiring embedding services
    requires_rag: Tests requiring RAG functionality
    slow: Tests that take >30 seconds to run
    critical: Critical tests for basic functionality
    benchmark: Benchmark-related tests
    media_processing: Media processing tests
    auth: Authentication tests

# Default options
addopts =
    -v
    --tb=short
    --strict-markers
    -p no:warnings

# Timeout for tests (seconds)
timeout = 300

# Minimum Python version
minversion = 3.8

# Test paths
testpaths = .

# Console output
console_output_style = progress

# Coverage settings (if pytest-cov is installed)
[coverage:run]
source = tldw_Server_API
omit =
    */tests/*
    */test_*.py
