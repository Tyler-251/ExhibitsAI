# tldw_server - Production .env example
# Copy to .env and customize. Do not commit secrets.

# ===== Mode & Security =====
# single_user (API key) or multi_user (JWT)
AUTH_MODE=multi_user

# In single_user mode, set a strong key (>=24 chars)
SINGLE_USER_API_KEY=THIS-IS-A-SECURE-KEY-123-REPLACE-ME

# In multi_user mode, set a strong JWT secret (>=32 chars)
JWT_SECRET_KEY=REPLACE_ME_WITH_STRONG_RANDOM_BASE64

# Enable production hardening guards (mask API key, enforce checks)
tldw_production=true
SHOW_API_KEY_ON_STARTUP=false

# ===== Database (AuthNZ) =====
# For production multi-user, use Postgres (matches docker-compose.yml services)
POSTGRES_DB=tldw_users
POSTGRES_USER=tldw_user
POSTGRES_PASSWORD=ChangeMeStrong123!
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Optional: route Jobs backend to Postgres as well
# JOBS_DB_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# ===== CORS / Web =====
# Comma-separated list or JSON array of trusted origins
ALLOWED_ORIGINS=https://your.domain.com

# ===== Runtime =====
UVICORN_WORKERS=4
LOG_LEVEL=info

# ===== Providers (examples) =====
# OPENAI_API_KEY=sk-...
# ANTHROPIC_API_KEY=...
# GOOGLE_API_KEY=...
# MISTRAL_API_KEY=...

# ===== Registration (multi-user) =====
# ENABLE_REGISTRATION=false
# REQUIRE_REGISTRATION_CODE=true
# DEFAULT_STORAGE_QUOTA_MB=5120

# ===== Redis (optional) =====
# REDIS_URL=redis://redis:6379/0

# ===== AuthNZ Security Alerts (optional) =====
# SECURITY_ALERTS_ENABLED=true
# SECURITY_ALERT_MIN_SEVERITY=high
# SECURITY_ALERT_WEBHOOK_URL=https://hooks.slack.com/services/...
# SECURITY_ALERT_WEBHOOK_HEADERS={"Authorization":"Bearer ..."}
# SECURITY_ALERT_EMAIL_TO=secops@example.com,devoncall@example.com
# SECURITY_ALERT_EMAIL_FROM=authnz-alerts@example.com
# SECURITY_ALERT_SMTP_HOST=smtp.example.com
# SECURITY_ALERT_SMTP_PORT=587
# SECURITY_ALERT_SMTP_STARTTLS=true
# SECURITY_ALERT_SMTP_USERNAME=smtp-user
# SECURITY_ALERT_SMTP_PASSWORD=REPLACE_ME
# SECURITY_ALERT_FILE_MIN_SEVERITY=high
# SECURITY_ALERT_WEBHOOK_MIN_SEVERITY=high
# SECURITY_ALERT_EMAIL_MIN_SEVERITY=critical
# SECURITY_ALERT_BACKOFF_SECONDS=30
